generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id           Int           @id @default(autoincrement())
  nom          String
  email        String        @unique
  telephone    String
  password     String
  role         String        @default("client")
  abonnements  Abonnement[]
  cars         Car[]
  reservations Reservation[]
  tickets Ticket[]
}

model Car {
  id                    Int           @id @default(autoincrement())
  marque                String       
  modele                String
  annee                 Int           
  plaqueImmatriculation String
  dateEntree            DateTime
  statut                String
  clientId              Int
  user                  User          @relation(fields: [clientId], references: [id])
  reservations          Reservation[]
  tickets               Ticket[]
}


model Ticket {
  id           Int      @id @default(autoincrement())
  type         String
  message      String
  dateCreation DateTime @default(now())
  statut       String   @default("En attente")
  voitureId    Int
  clientId     Int
  car          Car      @relation(fields: [voitureId], references: [id])
  user         User     @relation(fields: [clientId], references: [id])
}


model Abonnement {
  id        Int      @id @default(autoincrement())
  dateDebut DateTime
  dateFin   DateTime
  type      String
  clientId  Int
  user      User     @relation(fields: [clientId], references: [id])
}

model Reservation {
  id        Int      @id @default(autoincrement())
  dateHeure DateTime
  voitureId Int
  clientId  Int
  user      User     @relation(fields: [clientId], references: [id])
  car       Car      @relation(fields: [voitureId], references: [id])
}
